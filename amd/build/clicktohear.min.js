define("mod_readaloud/clicktohear",["jquery","core/log","mod_readaloud/definitions","mod_readaloud/pollyhelper"],(function($,log,def,pollyhelper){return log.debug("Click to hear: initialising"),{controls:{},ttsvoice:"Amy",cd:{hiddenplayerclass:def.hiddenplayer,wordclass:def.wordclass,passagecontainer:def.passagecontainer,fullreportcontainer:def.fullreportcontainer},init:function(opts){pollyhelper.init(opts.token,opts.region,opts.owner),this.ttsvoice=opts.ttsvoice,this.register_controls(),this.register_events()},register_controls:function(){this.controls.audioplayer=$("#"+this.cd.hiddenplayerclass),this.controls.component=$("#"+def.component),this.controls.fullreportcontainer=$("."+this.cd.fullreportcontainer)},register_events:function(){var that=this,aplayer=this.controls.audioplayer;pollyhelper.onnewpollyurl=function(theurl){aplayer.attr("src",theurl),aplayer[0].play()},this.controls.component.on("click","."+this.cd.fullreportcontainer+" ."+this.cd.wordclass,(function(){var wordnumber=parseInt($(this).attr("data-wordnumber")),text=$("#"+that.cd.wordclass+"_"+wordnumber).text();pollyhelper.request_polly_url(text,"text",that.ttsvoice)}))}}}));

//# sourceMappingURL=clicktohear.min.js.map