define(["jquery","core/log","mod_readaloud/definitions","mod_readaloud/pollyhelper"],function(a,b,c,d){"use strict";return b.debug("Click to hear: initialising"),{controls:{},ttsvoice:"Amy",cd:{hiddenplayerclass:c.hiddenplayer,wordclass:c.wordclass,passagecontainer:c.passagecontainer},init:function(a){d.init(a.token,a.region,a.owner),this.ttsvoice=a.ttsvoice,this.register_controls(),this.register_events()},register_controls:function(){this.controls.audioplayer=a("#"+this.cd.hiddenplayerclass),this.controls.eachword=a("."+this.cd.wordclass),this.controls.eachspace=a("."+this.cd.spaceclass),this.controls.passagecontainer=a("."+this.cd.passagecontainer)},register_events:function(){var b=this,c=this.controls.audioplayer;d.onnewpollyurl=function(a){c.attr("src",a),c[0].play()},this.controls.eachword.click(function(){var c=parseInt(a(this).attr("data-wordnumber")),e=a("#"+b.cd.wordclass+"_"+c),f=e.text();d.fetch_polly_url(f,"text",b.ttsvoice)})}}});