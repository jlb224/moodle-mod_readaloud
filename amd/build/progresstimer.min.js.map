{"version":3,"file":"progresstimer.min.js","sources":["../src/progresstimer.js"],"sourcesContent":["/* jshint ignore:start */\r\n// Uses CommonJS, AMD or browser globals to create a jQuery plugin.\r\n(function(factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(['jquery'], factory);\r\n    } else if (typeof module === 'object' && module.exports) {\r\n        // Node/CommonJS\r\n        module.exports = function(root, jQuery) {\r\n            if (jQuery === undefined) {\r\n                // require('jQuery') returns a factory that requires window to\r\n                // build a jQuery instance, we normalize how we use modules\r\n                // that require this pattern but the window provided is a noop\r\n                // if it's defined (how jquery works)\r\n                if (typeof window !== 'undefined') {\r\n                    jQuery = require('jquery');\r\n                }\r\n                else {\r\n                    jQuery = require('jquery')(root);\r\n                }\r\n            }\r\n            factory(jQuery);\r\n            return jQuery;\r\n        };\r\n    } else {\r\n        // Browser globals\r\n        factory(jQuery);\r\n    }\r\n}(function ($) {\r\n    $.fn.progressTimer = function (options) {\r\n        var settings = $.extend({}, $.fn.progressTimer.defaults, options);\r\n\r\n        this.each(function () {\r\n            $(this).empty();\r\n            var barContainer = $(\"<div>\").addClass(\"progress active\").css('height', settings.height);\r\n            var bar = $(\"<div>\").addClass(\"progress-bar\").addClass(settings.baseStyle)\r\n                .attr(\"role\", \"progressbar\")\r\n                .attr(\"aria-valuenow\", \"0\")\r\n                .attr(\"aria-valuemin\", \"0\")\r\n                .attr(\"aria-valuemax\", settings.timeLimit);\r\n\r\n            bar.appendTo(barContainer);\r\n            barContainer.appendTo($(this));\r\n\r\n            var start = new Date();\r\n            var limit = settings.timeLimit * 1000;\r\n            var interval = window.setInterval(function () {\r\n                var elapsed = new Date() - start;\r\n                bar.width(((elapsed / limit) * 100) + \"%\");\r\n\r\n                if (limit - elapsed <= 5000) {\r\n                    bar.removeClass(settings.baseStyle)\r\n                        .removeClass(settings.completeStyle)\r\n                        .addClass(settings.warningStyle);\r\n                }\r\n\r\n                if (elapsed >= limit) {\r\n                    window.clearInterval(interval);\r\n\r\n                    bar.removeClass(settings.baseStyle)\r\n                        .removeClass(settings.warningStyle)\r\n                        .addClass(settings.completeStyle);\r\n\r\n                    settings.onFinish.call(this);\r\n                }\r\n\r\n            }, 250);\r\n\r\n            $(this).attr('timer', interval);\r\n        });\r\n\r\n        return this;\r\n    };\r\n\r\n    $.fn.progressTimer.defaults = {\r\n        action: '',\r\n        height: '5px',\r\n        timeLimit: 60,// Total number of seconds\r\n        warningThreshold: 5,// Seconds remaining triggering switch to warning color\r\n        onFinish: function() {},// Invoked once the timer expires\r\n        baseStyle: 'bg-danger progress-bar progress-bar-animated',// Bootstrap progress bar style at the beginning of the timer\r\n        warningStyle: 'bg-danger progress-bar progress-bar-animated', // Bootstrap progress bar style in the warning phase\r\n        completeStyle: 'bg-danger progress-bar progress-bar-animated progress-bar-complete'// Bootstrap progress bar style at completion of timer\r\n    };\r\n}));\r\n/* jshint ignore:end */\r\n"],"names":["factory","$","fn","progressTimer","options","settings","extend","defaults","each","this","empty","barContainer","addClass","css","height","bar","baseStyle","attr","timeLimit","appendTo","start","Date","limit","interval","window","setInterval","elapsed","width","removeClass","completeStyle","warningStyle","clearInterval","onFinish","call","action","warningThreshold","define","amd","module","exports","root","jQuery","undefined","require"],"mappings":"AAEC,IAASA,QAAAA,QA0BR,SAAUC,GACRA,EAAEC,GAAGC,cAAgB,SAAUC,aACvBC,SAAWJ,EAAEK,OAAO,GAAIL,EAAEC,GAAGC,cAAcI,SAAUH,qBAEpDI,MAAK,WACNP,EAAEQ,MAAMC,YACJC,aAAeV,EAAE,SAASW,SAAS,mBAAmBC,IAAI,SAAUR,SAASS,QAC7EC,IAAMd,EAAE,SAASW,SAAS,gBAAgBA,SAASP,SAASW,WAC3DC,KAAK,OAAQ,eACbA,KAAK,gBAAiB,KACtBA,KAAK,gBAAiB,KACtBA,KAAK,gBAAiBZ,SAASa,WAEpCH,IAAII,SAASR,cACbA,aAAaQ,SAASlB,EAAEQ,WAEpBW,MAAQ,IAAIC,KACZC,MAA6B,IAArBjB,SAASa,UACjBK,SAAWC,OAAOC,aAAY,eAC1BC,QAAU,IAAIL,KAASD,MAC3BL,IAAIY,MAAQD,QAAUJ,MAAS,IAAO,KAElCA,MAAQI,SAAW,KACnBX,IAAIa,YAAYvB,SAASW,WACpBY,YAAYvB,SAASwB,eACrBjB,SAASP,SAASyB,cAGvBJ,SAAWJ,QACXE,OAAOO,cAAcR,UAErBR,IAAIa,YAAYvB,SAASW,WACpBY,YAAYvB,SAASyB,cACrBlB,SAASP,SAASwB,eAEvBxB,SAAS2B,SAASC,KAAKxB,SAG5B,KAEHR,EAAEQ,MAAMQ,KAAK,QAASM,aAGnBd,MAGXR,EAAEC,GAAGC,cAAcI,SAAW,CAC1B2B,OAAQ,GACRpB,OAAQ,MACRI,UAAW,GACXiB,iBAAkB,EAClBH,SAAU,aACVhB,UAAW,+CACXc,aAAc,+CACdD,cAAe,uEA/EG,mBAAXO,QAAyBA,OAAOC,IAEvCD,qCAAO,CAAC,UAAWpC,SACM,iBAAXsC,QAAuBA,OAAOC,QAE5CD,OAAOC,QAAU,SAASC,KAAMC,oBACbC,IAAXD,SAMIA,OADkB,oBAAXjB,OACEmB,QAAQ,UAGRA,QAAQ,SAARA,CAAkBH,OAGnCxC,QAAQyC,QACDA,QAIXzC,QAAQyC"}