{"version":3,"file":"togglemodemenu.min.js","sources":["../src/togglemodemenu.js"],"sourcesContent":["define(['jquery'], function($) {\n    var ToggleModeMenu = {\n        init: function() {\n            var toggleButton = document.getElementById(\"menu-toggle\");\n            var modeMenu = document.getElementById(\"mod_readaloud_menubuttons_cont\");\n\n            // Initialise state from localStorage using the key \"modeMenuOpen\".\n            var isOpen = localStorage.getItem('modeMenuOpen') === 'true';\n            if (isOpen) {\n                modeMenu.classList.remove(\"closed\");\n                toggleButton.setAttribute(\"aria-expanded\", \"true\");\n            } else {\n                modeMenu.classList.add(\"closed\");\n                toggleButton.setAttribute(\"aria-expanded\", \"false\");\n            }\n\n            // Toggle function for the mode menu.\n            function toggleModeMenu() {\n                var open = toggleButton.getAttribute(\"aria-expanded\") === \"true\";\n                if (open) {\n                    // Close the mode menu.\n                    modeMenu.classList.add(\"closed\");\n                    toggleButton.setAttribute(\"aria-expanded\", \"false\");\n                    localStorage.setItem('modeMenuOpen', false);\n                } else {\n                    // Open the mode menu.\n                    modeMenu.classList.remove(\"closed\");\n                    toggleButton.setAttribute(\"aria-expanded\", \"true\");\n                    modeMenu.focus(); // Move focus to the menu for accessibility.\n                    localStorage.setItem('modeMenuOpen', true);\n                }\n            }\n\n            // Attach the click event listener to the toggle button.\n            toggleButton.addEventListener(\"click\", toggleModeMenu);\n\n            // Responsive behavior: auto-close on screens narrower than 768px.\n            function checkResponsive() {\n                if (window.innerWidth < 768) {\n                    modeMenu.classList.add(\"closed\");\n                    toggleButton.setAttribute(\"aria-expanded\", \"false\");\n                    localStorage.setItem('modeMenuOpen', false);\n                }\n            }\n            window.addEventListener(\"resize\", checkResponsive);\n\n            // Optional: Listen for the end of CSS transitions.\n            modeMenu.addEventListener('transitionend', function() {\n                console.log(\"Mode Menu transition ended.\");\n            });\n        }\n    };\n\n    return ToggleModeMenu;\n});\n"],"names":["define","$","init","toggleButton","document","getElementById","modeMenu","localStorage","getItem","classList","remove","setAttribute","add","addEventListener","getAttribute","setItem","focus","window","innerWidth","console","log"],"mappings":"AAAAA,sCAAO,CAAC,WAAW,SAASC,SACH,CACjBC,KAAM,eACEC,aAAeC,SAASC,eAAe,eACvCC,SAAWF,SAASC,eAAe,kCAGe,SAAzCE,aAAaC,QAAQ,iBAE9BF,SAASG,UAAUC,OAAO,UAC1BP,aAAaQ,aAAa,gBAAiB,UAE3CL,SAASG,UAAUG,IAAI,UACvBT,aAAaQ,aAAa,gBAAiB,UAqB/CR,aAAaU,iBAAiB,oBAhBgC,SAA/CV,aAAaW,aAAa,kBAGjCR,SAASG,UAAUG,IAAI,UACvBT,aAAaQ,aAAa,gBAAiB,SAC3CJ,aAAaQ,QAAQ,gBAAgB,KAGrCT,SAASG,UAAUC,OAAO,UAC1BP,aAAaQ,aAAa,gBAAiB,QAC3CL,SAASU,QACTT,aAAaQ,QAAQ,gBAAgB,OAe7CE,OAAOJ,iBAAiB,qBANhBI,OAAOC,WAAa,MACpBZ,SAASG,UAAUG,IAAI,UACvBT,aAAaQ,aAAa,gBAAiB,SAC3CJ,aAAaQ,QAAQ,gBAAgB,OAM7CT,SAASO,iBAAiB,iBAAiB,WACvCM,QAAQC,IAAI"}