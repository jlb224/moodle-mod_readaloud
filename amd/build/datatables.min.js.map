{"version":3,"file":"datatables.min.js","sources":["../src/datatables.js"],"sourcesContent":["define(['jquery', 'core/log', 'https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js'], function ($, log, datatables) {\n    \"use strict\"; // jshint ;_;\n\n    /*\n    This file contains class and ID definitions.\n     */\n\n    log.debug('Readaloud Teacher Datatables helper: initialising');\n\n    return {\n        //pass in config, amd set up table\n        init: function (props) {\n            //pick up opts from html\n            var that = this;\n            var thetable = $('#' + props.tableid);\n            this.dt = thetable.DataTable(props.tableprops);\n            //this.setup_bulkdelete();\n        },\n\n        getDataTable: function(tableid){\n            return $('#' + tableid).DataTable();\n        },\n\n        setup_bulkdelete: function(){\n            //get the bulk delete button\n            var bulkdelete_btn = $('#mod_readaloud_deleteconfirmation');\n\n            //handle the click event\n            bulkdelete_btn.on('click', function(e) {\n                var btn = bulkdelete_btn[0];\n\n                ModalFactory.create({\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    title: str.get_string('confirmation', 'admin'),\n                    body: str.get_string('bulkdeletequestion', 'mod_readaloud'),\n                    removeOnClose: true\n                }).then(function(modal) {\n                    modal.setSaveButtonText(str.get_string('yes', 'moodle'));\n\n                    modal.getRoot().on(ModalEvents.save, function() {\n                        var form = btn.closest('form');\n                        var input = document.createElement('input');\n                        input.setAttribute('type', 'hidden');\n                        input.setAttribute('name', btn.getAttribute('name'));\n                        input.setAttribute('value', btn.getAttribute('value'));\n                        form.appendChild(input);\n                        if (typeof M.core_formchangechecker !== 'undefined') {\n                            M.core_formchangechecker.set_form_submitted();\n                        }\n                        form.submit();\n                    });\n\n                    modal.show();\n\n                    return modal;\n                });\n            });\n        }\n\n    };//end of return value\n});"],"names":["define","$","log","datatables","debug","init","props","thetable","tableid","dt","DataTable","tableprops","getDataTable","setup_bulkdelete","bulkdelete_btn","on","e","btn","ModalFactory","create","type","types","SAVE_CANCEL","title","str","get_string","body","removeOnClose","then","modal","setSaveButtonText","getRoot","ModalEvents","save","form","closest","input","document","createElement","setAttribute","getAttribute","appendChild","M","core_formchangechecker","set_form_submitted","submit","show"],"mappings":"AAAAA,kCAAO,CAAC,SAAU,WAAY,mEAAmE,SAAUC,EAAGC,IAAKC,mBAO/GD,IAAIE,MAAM,qDAEH,CAEHC,KAAM,SAAUC,WAGRC,SAAWN,EAAE,IAAMK,MAAME,cACxBC,GAAKF,SAASG,UAAUJ,MAAMK,aAIvCC,aAAc,SAASJ,gBACZP,EAAE,IAAMO,SAASE,aAG5BG,iBAAkB,eAEVC,eAAiBb,EAAE,qCAGvBa,eAAeC,GAAG,SAAS,SAASC,OAC5BC,IAAMH,eAAe,GAEzBI,aAAaC,OAAO,CAChBC,KAAMF,aAAaG,MAAMC,YACzBC,MAAOC,IAAIC,WAAW,eAAgB,SACtCC,KAAMF,IAAIC,WAAW,qBAAsB,iBAC3CE,eAAe,IAChBC,MAAK,SAASC,cACbA,MAAMC,kBAAkBN,IAAIC,WAAW,MAAO,WAE9CI,MAAME,UAAUhB,GAAGiB,YAAYC,MAAM,eAC7BC,KAAOjB,IAAIkB,QAAQ,QACnBC,MAAQC,SAASC,cAAc,SACnCF,MAAMG,aAAa,OAAQ,UAC3BH,MAAMG,aAAa,OAAQtB,IAAIuB,aAAa,SAC5CJ,MAAMG,aAAa,QAAStB,IAAIuB,aAAa,UAC7CN,KAAKO,YAAYL,YACuB,IAA7BM,EAAEC,wBACTD,EAAEC,uBAAuBC,qBAE7BV,KAAKW,YAGThB,MAAMiB,OAECjB"}