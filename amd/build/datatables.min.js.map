{"version":3,"file":"datatables.min.js","sources":["../src/datatables.js"],"sourcesContent":["define(['jquery', 'core/log', 'https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js'], function ($, log, datatables) {\r\n    \"use strict\"; // jshint ;_;\r\n\r\n    /*\r\n    This file contains class and ID definitions.\r\n     */\r\n\r\n    log.debug('Readaloud Teacher Datatables helper: initialising');\r\n\r\n    return {\r\n        //pass in config, amd set up table\r\n        init: function (props) {\r\n            //pick up opts from html\r\n            var that = this;\r\n            var thetable = $('#' + props.tableid);\r\n            this.dt = thetable.DataTable(props.tableprops);\r\n            //this.setup_bulkdelete();\r\n        },\r\n\r\n        getDataTable: function(tableid){\r\n            return $('#' + tableid).DataTable();\r\n        },\r\n\r\n        setup_bulkdelete: function(){\r\n            //get the bulk delete button\r\n            var bulkdelete_btn = $('#mod_readaloud_deleteconfirmation');\r\n\r\n            //handle the click event\r\n            bulkdelete_btn.on('click', function(e) {\r\n                var btn = bulkdelete_btn[0];\r\n\r\n                ModalFactory.create({\r\n                    type: ModalFactory.types.SAVE_CANCEL,\r\n                    title: str.get_string('confirmation', 'admin'),\r\n                    body: str.get_string('bulkdeletequestion', 'mod_readaloud'),\r\n                    removeOnClose: true\r\n                }).then(function(modal) {\r\n                    modal.setSaveButtonText(str.get_string('yes', 'moodle'));\r\n\r\n                    modal.getRoot().on(ModalEvents.save, function() {\r\n                        var form = btn.closest('form');\r\n                        var input = document.createElement('input');\r\n                        input.setAttribute('type', 'hidden');\r\n                        input.setAttribute('name', btn.getAttribute('name'));\r\n                        input.setAttribute('value', btn.getAttribute('value'));\r\n                        form.appendChild(input);\r\n                        if (typeof M.core_formchangechecker !== 'undefined') {\r\n                            M.core_formchangechecker.set_form_submitted();\r\n                        }\r\n                        form.submit();\r\n                    });\r\n\r\n                    modal.show();\r\n\r\n                    return modal;\r\n                });\r\n            });\r\n        }\r\n\r\n    };//end of return value\r\n});"],"names":["define","$","log","datatables","debug","init","props","thetable","tableid","dt","DataTable","tableprops","getDataTable","setup_bulkdelete","bulkdelete_btn","on","e","btn","ModalFactory","create","type","types","SAVE_CANCEL","title","str","get_string","body","removeOnClose","then","modal","setSaveButtonText","getRoot","ModalEvents","save","form","closest","input","document","createElement","setAttribute","getAttribute","appendChild","M","core_formchangechecker","set_form_submitted","submit","show"],"mappings":"AAAAA,kCAAO,CAAC,SAAU,WAAY,mEAAmE,SAAUC,EAAGC,IAAKC,mBAO/GD,IAAIE,MAAM,qDAEH,CAEHC,KAAM,SAAUC,WAGRC,SAAWN,EAAE,IAAMK,MAAME,cACxBC,GAAKF,SAASG,UAAUJ,MAAMK,aAIvCC,aAAc,SAASJ,gBACZP,EAAE,IAAMO,SAASE,aAG5BG,iBAAkB,eAEVC,eAAiBb,EAAE,qCAGvBa,eAAeC,GAAG,SAAS,SAASC,OAC5BC,IAAMH,eAAe,GAEzBI,aAAaC,OAAO,CAChBC,KAAMF,aAAaG,MAAMC,YACzBC,MAAOC,IAAIC,WAAW,eAAgB,SACtCC,KAAMF,IAAIC,WAAW,qBAAsB,iBAC3CE,eAAe,IAChBC,MAAK,SAASC,cACbA,MAAMC,kBAAkBN,IAAIC,WAAW,MAAO,WAE9CI,MAAME,UAAUhB,GAAGiB,YAAYC,MAAM,eAC7BC,KAAOjB,IAAIkB,QAAQ,QACnBC,MAAQC,SAASC,cAAc,SACnCF,MAAMG,aAAa,OAAQ,UAC3BH,MAAMG,aAAa,OAAQtB,IAAIuB,aAAa,SAC5CJ,MAAMG,aAAa,QAAStB,IAAIuB,aAAa,UAC7CN,KAAKO,YAAYL,YACuB,IAA7BM,EAAEC,wBACTD,EAAEC,uBAAuBC,qBAE7BV,KAAKW,YAGThB,MAAMiB,OAECjB"}