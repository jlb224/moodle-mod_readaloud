{"version":3,"file":"quizcontroller.min.js","sources":["../src/quizcontroller.js"],"sourcesContent":["/* jshint ignore:start */\r\ndefine(['jquery', 'core/log','mod_readaloud/definitions','mod_readaloud/quizhelper','mod_readaloud/pollyhelper'], function($,  log, def,  quizhelper,polly) {\r\n\r\n    \"use strict\"; // jshint ;_;\r\n\r\n    log.debug('ReadAloud Quiz Controller: initialising');\r\n\r\n    return {\r\n\r\n        cmid: null,\r\n        quizdata: null,\r\n        sorryboxid: null,\r\n        controls: null,\r\n\r\n        //pass in config, the jquery video/audio object, and a function to be called when conversion has finshed\r\n        init: function(props){\r\n            var dd = this;\r\n\r\n            //pick up opts from html\r\n            var theid='#amdopts_' + props.widgetid;\r\n            var configcontrol = $(theid).get(0);\r\n            if(configcontrol){\r\n                dd.quizdata = JSON.parse(configcontrol.value);\r\n                $(theid).remove();\r\n            }else{\r\n                //if there is no config we might as well give up\r\n                log.debug('Readaloud quiz Controller: No config found on page. Giving up.');\r\n                return;\r\n            }\r\n\r\n            dd.cmid = props.cmid;\r\n            dd.attemptid = 1;\r\n            dd.sorryboxid = props.widgetid + '_sorrybox';\r\n\r\n            polly.init(dd.quizdata.token,dd.quizdata.region,dd.quizdata.owner);\r\n\r\n            dd.register_events();\r\n            dd.process_html();\r\n            //OR to show quiz and no recorder do dd.doquizlayout\r\n            dd.doquizlayout();\r\n        },\r\n\r\n        process_html: function(){\r\n            var opts = this.quizdata;\r\n            //these css classes/ids are all passed in from php in\r\n            //renderer.php::fetch_activity_amd\r\n            var controls ={\r\n                introbox: $('.' + 'mod_intro_box'),\r\n                quizcontainer: $('.' +  opts['quizcontainer']),\r\n                feedbackcontainer: $('.' +  opts['feedbackcontainer']),\r\n                errorcontainer: $('.' +  opts['errorcontainer']),\r\n                instructionscontainer: $('.' +  opts['instructionscontainer']),\r\n                wheretonextcontainer: $('.' +  opts['wheretonextcontainer']),\r\n                placeholder: $('.mod_readaloud_placeholder')\r\n            };\r\n            this.controls = controls;\r\n        },\r\n\r\n        register_events: function() {\r\n           //do something\r\n\r\n        },\r\n\r\n        doquizlayout: function(){\r\n            var dd = this;\r\n            dd.controls.instructionscontainer.hide();\r\n\r\n            //set up the quiz\r\n           // quizhelper.onSubmit = function(returndata){dd.dofinishedreadinglayout(returndata);};\r\n            quizhelper.init(dd.controls.quizcontainer,\r\n                this.quizdata,\r\n                this.cmid,\r\n                this.attemptid,\r\n                polly);\r\n\r\n            //show the quiz\r\n            dd.controls.placeholder.hide();\r\n            dd.controls.quizcontainer.show();\r\n        },\r\n\r\n        doerrorlayout: function(){\r\n            this.controls.errorcontainer.show();\r\n            this.controls.wheretonextcontainer.show();\r\n        }\r\n    };//end of returned object\r\n});//total end\r\n"],"names":["define","$","log","def","quizhelper","polly","debug","cmid","quizdata","sorryboxid","controls","init","props","dd","this","theid","widgetid","configcontrol","get","JSON","parse","value","remove","attemptid","token","region","owner","register_events","process_html","doquizlayout","opts","introbox","quizcontainer","feedbackcontainer","errorcontainer","instructionscontainer","wheretonextcontainer","placeholder","hide","show","doerrorlayout"],"mappings":"AACAA,sCAAO,CAAC,SAAU,WAAW,4BAA4B,2BAA2B,8BAA8B,SAASC,EAAIC,IAAKC,IAAMC,WAAWC,cAIjJH,IAAII,MAAM,2CAEH,CAEHC,KAAM,KACNC,SAAU,KACVC,WAAY,KACZC,SAAU,KAGVC,KAAM,SAASC,WACPC,GAAKC,KAGLC,MAAM,YAAcH,MAAMI,SAC1BC,cAAgBhB,EAAEc,OAAOG,IAAI,GAC9BD,eACCJ,GAAGL,SAAWW,KAAKC,MAAMH,cAAcI,OACvCpB,EAAEc,OAAOO,SAObT,GAAGN,KAAOK,MAAML,KAChBM,GAAGU,UAAY,EACfV,GAAGJ,WAAaG,MAAMI,SAAW,YAEjCX,MAAMM,KAAKE,GAAGL,SAASgB,MAAMX,GAAGL,SAASiB,OAAOZ,GAAGL,SAASkB,OAE5Db,GAAGc,kBACHd,GAAGe,eAEHf,GAAGgB,gBAbC3B,IAAII,MAAM,mEAgBlBsB,aAAc,eACNE,KAAOhB,KAAKN,SAGZE,SAAU,CACVqB,SAAU9B,EAAE,kBACZ+B,cAAe/B,EAAE,IAAO6B,KAAI,eAC5BG,kBAAmBhC,EAAE,IAAO6B,KAAI,mBAChCI,eAAgBjC,EAAE,IAAO6B,KAAI,gBAC7BK,sBAAuBlC,EAAE,IAAO6B,KAAI,uBACpCM,qBAAsBnC,EAAE,IAAO6B,KAAI,sBACnCO,YAAapC,EAAE,oCAEdS,SAAWA,UAGpBiB,gBAAiB,aAKjBE,aAAc,WACDf,KACNJ,SAASyB,sBAAsBG,OAIlClC,WAAWO,KALFG,KAKUJ,SAASsB,cACxBlB,KAAKN,SACLM,KAAKP,KACLO,KAAKS,UACLlB,OATKS,KAYNJ,SAAS2B,YAAYC,OAZfxB,KAaNJ,SAASsB,cAAcO,QAG9BC,cAAe,gBACN9B,SAASwB,eAAeK,YACxB7B,SAAS0B,qBAAqBG"}