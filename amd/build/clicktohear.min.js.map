{"version":3,"file":"clicktohear.min.js","sources":["../src/clicktohear.js"],"sourcesContent":["define(['jquery', 'core/log','mod_readaloud/definitions', 'mod_readaloud/pollyhelper'], function ($, log, def,pollyhelper) {\r\n    \"use strict\"; // jshint ;_;\r\n    /*\r\n    This file helps you get Polly URLs at runtime\r\n     */\r\n\r\n    log.debug('Click to hear: initialising');\r\n\r\n    return {\r\n        //controls\r\n        controls: {},\r\n        ttsvoice: 'Amy',\r\n\r\n        //class definitions\r\n        cd: {\r\n            hiddenplayerclass: def.hiddenplayer,\r\n            wordclass: def.wordclass,\r\n            passagecontainer: def.passagecontainer,\r\n        },\r\n\r\n        //init the module\r\n        init: function(opts){\r\n            pollyhelper.init(opts.token,opts.region,opts.owner);\r\n            this.ttsvoice=opts.ttsvoice;\r\n            this.register_controls();\r\n            this.register_events();\r\n        },\r\n\r\n        //load all the controls so we do not have to do it later\r\n        register_controls: function(){\r\n            this.controls.audioplayer = $('#' + this.cd.hiddenplayerclass);\r\n            this.controls.eachword = $('.' + this.cd.wordclass);\r\n            this.controls.eachspace = $('.' + this.cd.spaceclass);\r\n            this.controls.passagecontainer = $(\".\" + this.cd.passagecontainer);\r\n        },\r\n\r\n        //attach the various event handlers we need\r\n        register_events: function() {\r\n            var that = this;\r\n\r\n            // Get the audio element\r\n            var aplayer = this.controls.audioplayer;\r\n            pollyhelper.onnewpollyurl=function(theurl){\r\n                aplayer.attr('src',theurl);\r\n                aplayer[0].play();\r\n            };\r\n\r\n            //register click listener\r\n            this.controls.eachword.click(function () {\r\n                var wordnumber = parseInt($(this).attr('data-wordnumber'));\r\n                var word = $('#' + that.cd.wordclass + '_' + wordnumber);\r\n                var text = word.text();\r\n                pollyhelper.request_polly_url(text,\"text\",that.ttsvoice);\r\n            });\r\n        }//end of register events\r\n\r\n    };//end of return value\r\n});"],"names":["define","$","log","def","pollyhelper","debug","controls","ttsvoice","cd","hiddenplayerclass","hiddenplayer","wordclass","passagecontainer","init","opts","token","region","owner","register_controls","register_events","audioplayer","this","eachword","eachspace","spaceclass","that","aplayer","onnewpollyurl","theurl","attr","play","click","wordnumber","parseInt","text","request_polly_url"],"mappings":"AAAAA,mCAAO,CAAC,SAAU,WAAW,4BAA6B,8BAA8B,SAAUC,EAAGC,IAAKC,IAAIC,oBAM1GF,IAAIG,MAAM,+BAEH,CAEHC,SAAU,GACVC,SAAU,MAGVC,GAAI,CACAC,kBAAmBN,IAAIO,aACvBC,UAAWR,IAAIQ,UACfC,iBAAkBT,IAAIS,kBAI1BC,KAAM,SAASC,MACXV,YAAYS,KAAKC,KAAKC,MAAMD,KAAKE,OAAOF,KAAKG,YACxCV,SAASO,KAAKP,cACdW,yBACAC,mBAITD,kBAAmB,gBACVZ,SAASc,YAAcnB,EAAE,IAAMoB,KAAKb,GAAGC,wBACvCH,SAASgB,SAAWrB,EAAE,IAAMoB,KAAKb,GAAGG,gBACpCL,SAASiB,UAAYtB,EAAE,IAAMoB,KAAKb,GAAGgB,iBACrClB,SAASM,iBAAmBX,EAAE,IAAMoB,KAAKb,GAAGI,mBAIrDO,gBAAiB,eACTM,KAAOJ,KAGPK,QAAUL,KAAKf,SAASc,YAC5BhB,YAAYuB,cAAc,SAASC,QAC/BF,QAAQG,KAAK,MAAMD,QACnBF,QAAQ,GAAGI,aAIVxB,SAASgB,SAASS,OAAM,eACrBC,WAAaC,SAAShC,EAAEoB,MAAMQ,KAAK,oBAEnCK,KADOjC,EAAE,IAAMwB,KAAKjB,GAAGG,UAAY,IAAMqB,YAC7BE,OAChB9B,YAAY+B,kBAAkBD,KAAK,OAAOT,KAAKlB"}