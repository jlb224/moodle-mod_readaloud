define(["jquery","core/log","mod_readaloud/definitions","mod_readaloud/dependencyloader","theme_boost/popover"],function(a,b,c){"use strict";return b.debug("Read Aloud Popover helper: initialising"),{lastitem:!1,okbuttonclass:c.okbuttonclass,ngbuttonclass:c.ngbuttonclass,quickgradecontainer:c.quickgradecontainerclass,quickgradetitle:M.util.get_string("quickgrade",c.component),transcripttitle:M.util.get_string("transcript",c.component),oklabel:M.util.get_string("ok",c.component),nglabel:M.util.get_string("ng",c.component),dispose:!1,init:function(){this.register_events()},register_events:function(){a(document).on("click","."+this.okbuttonclass,this.onAccept),a(document).on("click","."+this.ngbuttonclass,this.onReject)},disposeWord:function(){if(this.dispose)return this.dispose;var b="3";switch(a.fn.popover.Constructor.hasOwnProperty("VERSION")&&(b=a.fn.popover.Constructor.VERSION.charAt(0)),b){case"4":this.dispose="dispose";break;case"3":default:this.dispose="destroy"}return this.dispose},remove:function(b){b?a(b).popover(this.disposeWord()):this.lastitem&&(a(this.lastitem).popover(this.disposeWord()),this.lastitem=!1)},addQuickGrader:function(b){this.lastitem&&this.lastitem!==b&&(a(this.lastitem).popover(this.disposeWord()),this.lastitem=!1),this.lastitem=b;var c=this,d=function(){var b=a(this).attr("data-wordnumber"),d="<button type='button' class='btn "+c.okbuttonclass+"' data-wordnumber='"+b+"'><i class='fa fa-check'></i> "+c.oklabel+"</button>",e="<button type='button' class='btn "+c.ngbuttonclass+"' data-wordnumber='"+b+"'><i class='fa fa-close'></i> "+c.nglabel+"</button>",f="<div class='"+c.quickgradecontainerclass+"'>"+d+e+"</div>";return f};a(b).popover({title:this.quickgradetitle,content:d,trigger:"manual",placement:"top",html:!0}),a(b).popover("show")},addTranscript:function(b,c){return this.lastitem==b?(a(this.lastitem).popover(this.disposeWord()),void(this.lastitem=!1)):(this.lastitem&&(a(this.lastitem).popover(this.disposeWord()),this.lastitem=!1),this.lastitem=b,a(b).popover({title:this.transcripttitle,content:c,trigger:"manual",placement:"top"}),void a(b).popover("show"))},onAccept:function(){alert(a(this).attr("data-wordnumber"))},onReject:function(){alert(a(this).attr("data-wordnumber"))}}});