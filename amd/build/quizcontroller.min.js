define(["jquery","core/log","mod_readaloud/definitions","mod_readaloud/quizhelper","mod_readaloud/pollyhelper"],(function($,log,def,quizhelper,polly){return log.debug("ReadAloud Quiz Controller: initialising"),{cmid:null,quizdata:null,sorryboxid:null,controls:null,init:function(props){var dd=this,theid="#amdopts_"+props.widgetid,configcontrol=$(theid).get(0);configcontrol?(dd.quizdata=JSON.parse(configcontrol.value),$(theid).remove(),dd.cmid=props.cmid,dd.attemptid=1,dd.sorryboxid=props.widgetid+"_sorrybox",dd.process_html(),dd.register_events(),dd.doquizlayout()):log.debug("Readaloud quiz Controller: No config found on page. Giving up.")},process_html:function(){var opts=this.quizdata,controls={errorcontainer:$("."+opts.errorcontainer),feedbackcontainer:$("."+opts.feedbackcontainer),instructionscontainer:$("."+opts.instructionscontainer),introbox:$(".mod_intro_box"),modeimagecontainer:$("#"+opts.modeimagecontainer),placeholder:$(".mod_readaloud_placeholder"),quizcontainer:$("."+opts.quizcontainer),smallreportcontainer:$("#"+opts.smallreportcontainer),startquizbutton:$("#"+opts.startquizbutton),wheretonextcontainer:$("."+opts.wheretonextcontainer)};this.controls=controls},register_events:function(){var dd=this;dd.controls.startquizbutton.click((function(e){dd.doquizlayout()}))},doquizlayout:function(){var dd=this;dd.controls.instructionscontainer.hide(),dd.controls.smallreportcontainer.hide(),dd.controls.modeimagecontainer.removeClass("preview landr readaloud readaloudshadow report"),dd.controls.modeimagecontainer.addClass("quiz"),quizhelper.init(dd.controls.quizcontainer,this.quizdata,this.cmid,this.attemptid,polly),dd.controls.placeholder.hide(),dd.controls.quizcontainer.show()},doerrorlayout:function(){this.controls.errorcontainer.show(),this.controls.wheretonextcontainer.show()}}}));

//# sourceMappingURL=quizcontroller.min.js.map